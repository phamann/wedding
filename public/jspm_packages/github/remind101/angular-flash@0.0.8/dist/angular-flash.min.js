/*! angular-flash - v0.0.8 - 2014-10-30 */!function(a){"use strict";var b=function(a,b){return function(){return a.apply(b,arguments)}},c="template/flash-messages.html",d=a.module("ngFlash",["ng","ngSanitize"]);d.provider("$flash",function(){var c=5e3;this.setDefaultDuration=function(a){c=a};var d="alert";this.setDefaultType=function(a){d=a};var e="_flash";this.setFlashScopeKey=function(a){e=a};var f="$routeChangeSuccess";this.setRouteChangeSuccess=function(a){f=a},this.$get=["$rootScope","$timeout",function(g,h){function i(a,b){b=b||{},this.message=a,this.duration=b.duration||c,this.type=b.type||d,this.persist=b.persist,this.key=b.key||this.message,this.unique=!0,this.scope=b.scope||k,this.scope.hasOwnProperty(e)||(this.scope[e]={messages:[]})}var j,k=g;return i.prototype._messages=function(){return this.scope[e].messages},i.prototype.findExisting=function(){var b,c=this;return a.forEach(this._messages(),function(a){a.key===c.key&&(b=a)}),b},i.prototype.add=function(){var a=this.findExisting();if(a){var b=a.scope!=this.scope;a._remove(b)}return this._messages().push(this.init()),this},i.prototype._remove=function(a){this.cancelTimeout(),this._messages().splice(this._messages().indexOf(this),1);var b=this.scope!=k&&0==this._messages().length;a&&b&&delete this.scope._flash},i.prototype.remove=function(){this._remove(!0)},i.prototype.startTimeout=function(){return this.cancelTimeout(),this.timeout=h(b(this.remove,this),this.duration),this.timeout},i.prototype.cancelTimeout=function(){this.timeout&&h.cancel(this.timeout)},i.prototype.init=function(){var a=b(this.remove,this);if(this.startTimeout(),this.persist){var c=this,d=function(a,b){return function(){return--a<1?b.apply(this,arguments):void c.startTimeout()}};g.$on(f,d(this.persist+1,a))}else g.$on(f,a);return this},j=function(a,b){return new i(a,b).add()},j.reset=function(a){a=a||k,a[e].messages.length=0},j}]}),d.directive("flashMessages",function(){return{restrict:"EA",replace:!0,templateUrl:c}}),d.run(["$templateCache",function(a){a.get(c)||a.put(c,'<div class="flash-messages"><div class="flash-message {{message.type}}" ng-repeat="message in _flash.messages"><a href="" class="close" ng-click="message.remove()"></a><span class="flash-content" ng-bind-html="message.message"></span></div></div>')}])}(angular);